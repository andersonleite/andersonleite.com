--- 
layout: post
title: "Ruby, metaprograma\xC3\xA7\xC3\xA3o e conven\xC3\xA7\xC3\xB5es"
tags: 
- ruby
status: publish
type: post
published: true
meta: 
  _edit_last: "597486"
image: ruby
---
Metaprogramação (metaprogramming) é a técnica de utilizar código para gerar código.
Uma linguagem onde o metaprograma é escrito é chamado de metalinguagem.
A linguagem Ruby é dinâmica ao extremo, permitindo que sejam criados métodos em outros objetos.

Vamos criar uma classe Carro vazia. E uma classe Oficina, essa por sua vez sabe turbinar um carro:

<code>
class Carro
end
</code>

<code>
class Oficina
    def turbina(carro)
    def carro.turbo
      puts "turbinado!!"
    end  
  end
end</code>

Se instanciarmos um objeto Carro e chamarmos o método turbina, evidentemente ele não existe, porém podemos fazer com que a classe oficina crie o método no nosso objeto:

<code>c = Carro.new
oficina = Oficina.new
oficina.turbina c
c.turbo
</code>
# =&gt; turbinado!!

Outra coisa interessante é são as convenções de métodos que mudam o estado de objetos, colocando o caracter "!" (bang) para informar o efeito colateral.
Vamos criar o método "pinta" na Oficina e um construtor na classe carro obrigando a passar a cor. 

<code>
class Carro
  attr_accessor :cor
  def initialize(cor)
    @cor = cor
  end
end
</code>

<code>
class Oficina
  def pinta!(carro)
    carro.cor = 'azul'
  end
    def turbina(carro)
    def carro.turbo
      puts "turbinado!!"
    end  
  end
end
</code>

<code>c = Carro.new('verde')
puts c.cor
oficina = Oficina.new
oficina.turbina c
c.turbo
oficina.pinta! c
puts c.cor
</code>

#=&gt; verde
#=&gt; turbinado!!
#=&gt; azul


Metaprogramação e as convenções da linguagem ruby são extremamente úteis para chegar na melhor legibilidadede código possível com Ruby.
