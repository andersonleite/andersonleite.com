--- 
layout: post
title: Criando layouts em Grid no Android
tags: 
- android
status: publish
type: post
published: true
image: grid
---

<strong>
Criando Grid Layouts no Android com RecyclerView</strong>
<br><br>

Diversos aplicativos utilizam a interface de grid. E normalmente esse grid
recebe uma lista grande conteúdo. O processo mais utilizado por baixo dos panos é
o de consumir um serviço, normalmente uma API separada, e atualizar a tela conforme 
o usuário chega ao fim do grid. Dessa maneira a lista vai incrementando os elementos que
recebe.
Nesse post vou mstrar como utilizar um GridLayout para chegar num resultado como esse.
<br><br>

<center><img width="300px" src="/images/grid01.png"></center>
<br><br>

<b>Sobre RecyclerViews</b>
<br><br>

<span>RecyclerView</span> é o novo tipo de ViewGroup preparado pra renderizar qualquer tipo de adapter. É possívelmente o sucessor do ListView e do GridView.
<br><br>

Os elementos principais são o <span>RecyclerView.Adapter</span>, <span>LayoutManager</span> e o itens de <span>Animation/Decoration</span>.
Uma das vantagens de utilizar a <span>RecyclerView</span> é sua capacidade de reaproveitar slots do grid conforme o usuário faz o scroll. Elementos que ficaram para cima da tela são reaproveitados para mostrar novos elementos, o que ajuda muito no consumo de memória.
<br><br>

A palestra <a href="https://www.youtube.com/watch?v=-C5I1DAviJ8">Droidcon Montreal - Dave Smith - Mastering Recycler View</a> mostra bem esse cenário logo no começo.
<br><br>

<b>RecyclerView e GridLayoutManager</b>
<br><br>

Descendo um pouco no código necessário para chegar na implementação do grid da figura acima,
vamos começar com uma Activity comum, a MainActivity.
Nela criamos buscamos a referência a recyclerview que temos no xml da view. Logo após,
setamos como gerenciador de layout o <span>GridLayoutManager</span>. Quando a <span>RecyclerView</span> foi anunciada ainda não existia esse LayoutManager, mas com o tempo diversos outros além do GridLayoutManager foram disponibilizados. Repare que passaremos como parametro o número de colunas do grid.
<br><br>

{% gist 30595531cbe17443ba69 %}

<b>Views</b>
<br><br>

As views serão bem simples, no caso dois arquivos. O primeiro, <span>activity_main.xml</span> é referenciado na Activity. O segundo, <span>item.xml</span>, será utilizado para montar cada elemento do Grid.
<br><br>

{% gist 2db06f63711797693686 %}

<b>Adapter</b>
<br><br>

Nesse momento temos uma Activy linkada com uma view, além de referênciar o recyclerview a uma GridLayoutManager.
A parte importante agora é criar o adapter, responsável por gerenciar cada elemento que aparecerá no Grid.
<br><br>

O adapter terá uma lista de letras do alfabeto e cada letra será mostrada no grid. para isso, o adapter irá fazer o <span>extends</span> da classe <span>RecyclerView.Adapter</span>
E então teremos o override de 3 métodos para definir o comportamento da lista. os métodos são <span>onCreateViewHolder</span>, <span>onBindViewHolder</span> e <span>getItemCount</span>.
<br><br>

{% gist 78420fc192c059762866 %}

Ao rodar o projeto teremos quase tudo pronto. Os elementos serão mostrado em um grid. \o/
<center><img width="300px" src="/images/grid00.png"></center>

<b>Decoration</b>
<br><br>

Pra acertar as questões finais do layout utilizaremos um componente do <span>RecyclerView</span> chamado <span>RecyclerView.ItemDecoration</span>. Nele podemos, por exemplo, setar as margins entre elementos do Grid.
<br><br>

{% gist f6aef12b21abc3a625ba %}

<center><img width="300px" src="/images/grid01.png"></center>

<b>Mais sobre Recycler View</b>
<br><br>

Para saber mais sobre o assunto, recomendo fortemente a palestra <a href="https://www.youtube.com/watch?v=-C5I1DAviJ8">Droidcon Montreal - Dave Smith - Mastering Recycler View</a>. 