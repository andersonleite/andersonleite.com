--- 
layout: post
title: dica simples de ActiveRecord
tags: 
- rails
status: publish
type: post
published: true
meta: 
  _edit_last: "597486"
---
O ActiveRecord do Rails é bem famoso por buscar as colunas do banco de dados e adicionar os campos dinâmicamente nas classes, fazendo com que uma classe aparentemente sem atributos ou propriedades realize todas as operações de crud, por exemplo:

<code>
class Car &lt; ActiveRecord::Base
end
</code>

Para o model acima, o rails espera basicamente o seguinte:
arquivo = car.rb
class = Car
tabela = cars

lembrando que a pluralização funciona para os nomes em ingles. No caso de classes ou tabelas em português as configurações pode ser feitas no arquivo<em> config/initializers/inflections.rb</em>.

Mas o que muita gente tem dúvidas é no caso da utilização de um banco   onde as tabelas já existem e possuem nomes diferentes dos esperados pelo rails, como uma tabela TB_CARS_01.

Existe um método no ActiveRecord::Base para isso chamado <strong>set_table_name</strong>:
<code>
class Car &lt; ActiveRecord::Base
  set_table_name &quot;TB_CARS_01&quot;
end
</code>

Agora o rails buscará na tabela "TB_CARS_01" ao invés da default "cars".

Existe o caso onde o banco é novo, e a empresa precisa seguir algum padrão como o usado acima para os nomes das tabelas. Para criar a tabela com o nome "TB_CARS_001" a partir da migration é simples, basta  passar o nome do parâmetro para o create_table:

<code>
class CreateCars &lt; ActiveRecord::Migration
  def self.up
    create_table :TB_CARS_01 do |t|
      #...
      t.timestamps
    end
  end

  def self.down
    drop_table :TB_CARS_01
  end
end
</code>

Essas alterações não são encorajadas pelo rails, porém algumas equipes precisam delas.

Pra finalizar, existe um conjunto de gems para facilitar questões brasileiras no rails, como a própria pluralização, chamado
<a href="http://improveit.com.br/software_livre/brazilian_rails">Brazilian Rails</a>.
