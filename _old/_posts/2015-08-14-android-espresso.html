---
layout: post
title: Android UI tests with Espresso
tags:
- android
status: publish
type: post
published: true
image: espresso
---

<strong>Simulating user interactions on Android apps</strong>


Testing user interactions in a Android app helps us to ensure that
users do not encounter unexpected results or even that as developers
reduce the changes to introduce bugs in the flow of the app.


The Android Testing Support Library provides the <span>Espresso Framework</span>
for UI tests and user interactions. It can run in Android 2.2 (API Level 8) or highr.


<center><img width="300px" src="https://lh4.googleusercontent.com/-F-W0NfbhCko/VTbDOBX8xGI/AAAAAAAAGV4/KcjOO2cXQm4/w800-h800/espresso_lockup%2B(2).png"></center>


<b>ExpressoTest class</b>


Let's take a look at a simple Android Activity tested with Espresso.
The idea is pretty simple. There is a button to be clicked. The UI is updated
with a text when this action is performed.


To start the test we first need the <span>ActivityTestRule</span>. It's important to take a quick
look at the <a href="http://developer.android.com/reference/android/support/test/rule/ActivityTestRule.html">documentation of this class</a>. This is the way to provide functional testing of a single activity.


After that whe have the test method. Before Espresso interact with the app you must specify UI component or view. Espresso supports <a href="http://hamcrest.org/">Hamcrest Matchers</a> for specifying views. Now
it very simple to read. The first line will find the button and click on it. Second will find the TextView and verify whether the text is correct or not.


{% gist ce0309d7f9212d67c1f5 %}

PS: I kept the imports to make easier to understand where the methods came from.


<b>More resources about Espresso Framework</b>


This are two good links about Espresso, how to configure and to go deeper.


<a href="https://developer.android.com/training/testing/ui-testing/espresso-testing.html">Testing UI for a Single App</a>


<a href="http://www.vogella.com/tutorials/AndroidTestingEspresso/article.html
">Android user interface testing with Espresso - Tutorial</a>


